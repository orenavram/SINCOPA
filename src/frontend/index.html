<!DOCTYPE html>
<html lang="en">
    <head>
        <title>SINCOPA</title>
        <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/nav.css">
        <link rel="shortcut icon" type="image/x-icon" href="pics/logo.png" />

        <!--files for advanced options activation-->
        <script src="scripts/form_handler.js"></script>

        <!--files for selectpicker-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

        <!--files for the select tag-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>

        <!--files for the checkbox tag (toggle)-->
        <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    </head>
    <body>
        <nav role="navigation" class="navbar navbar-inverse navbar-fixed-top" id="nav">
            <div class="jumbotron" id="jumbo">
                <div class="container">
                    <div class="row" id="title-row">
                        <div class="col-md-1">
                        </div>
                        <div class="col-md-10">
                            <span >&nbsp;&nbsp;&nbsp;<img src="pics/logo.png" id="logo_image" class="img-rounded"></span>&nbsp;&nbsp;
                            <br>
                            <span id="sub-title"><b>Detecting selective sweeps in bacteria based on <i>Similarity of INCOngruent PAtterns</i></b></span><br>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container" id="nav_container">
                <div class="row">
                    <div class="col-md-1">
                    </div>
                    <div class="col-md-9">
                        <ul class="nav navbar-nav" id="menu-nav">
                            <li class="active">
                                <a href="index.html">Home</a>
                            </li>
                            <li>
                                <a href="overview.html">Overview</a>
                            </li>
                            <li>
                                <a href="terms.html">Terms of Use</a>
                            </li>
                            <li>
                                <a href="credits.html">Credits</a>
                            </li>
                            <li>
                                <a href="https://english.tau.ac.il/" id="tau-link" target="_blank">
                                    <img src=pics/TAU_LOGO.png id="tau-logo">
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        <div id="behind-nav-bar"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-1">
                </div>
                <div class="col-md-10">
                    <form id="form" action="https://sincopa.tau.ac.il/cgi-bin/sincopa_cgi.py" method="post" ENCTYPE="multipart/form-data" target="_blank" onsubmit="return validate_input() ">
                        <div class="container" id="basic">

                            <div class="form-group">
                                <p align="justify">
                                    <i>SINCOPA</i> allows you to apply an efficient selective sweeps analysis
                                    over bacterial DNA (aligned) sequences.
                                    Try to <i>Load example data</i> and test it!
                                </p>
                            </div>
                            <div class="form-group">
                                <b>Input data type:</b>
                                <button type="button" class="btn-primary-outline glyphicon" data-toggle="modal" data-target="#data_type_modal">&#xe085;</button><br>
                                <label for="input_is_provided_as_text">
                                    <input type="checkbox" id="input_is_provided_as_text" name="input_is_provided_as_text" data-toggle="toggle" data-on="Input as text" data-off="Input as files" onchange="RawOrTxt()" data-width="250" data-onstyle="default" data-offstyle="primary">
                                </label>
                            </div>
                            <div class="form-group" id="msa_file_div">
                                <b>DNA MSA file:</b>
                                <button type="button" class="btn-primary-outline glyphicon label-modal" data-toggle="modal" data-target="#msa_file_modal">&#xe085;</button><br>
                                <label class="btn btn-default btn-file">
                                    <input type="file" name="msa_file" id="msa_file" accept="fas,fasta,txt,fna">  <!--onchange="$('#upload-file-info').val($(this).val());"-->
                                </label>
                            </div>
                            <div class="form-group" id="tree_file_div">
                                <b>Phylogenetic tree file:</b>
                                <button type="button" class="btn-primary-outline glyphicon label-modal" data-toggle="modal" data-target="#tree_file_modal">&#xe085;</button><br>
                                <label class="btn btn-default btn-file">
                                    <input type="file" name="tree_file" id="tree_file" accept="txt,newick,tree">
                                </label>
                            </div>
                            <div class="form-group" id="msa_text_div" hidden>
                                <b>MSA text:</b>
                                <button type="button" class="btn-primary-outline glyphicon label-modal" data-toggle="modal" data-target="#msa_text_modal">&#xe085;</button><br>
                                <label for="msa_text">
                                    <textarea class="form-control" id="msa_text" name="msa_text" rows="5" cols="90"></textarea>
                                </label>
                            </div>
                            <div class="form-group" id="tree_text_div" hidden>
                                <b>Phylogenetic tree text:</b>
                                <button type="button" class="btn-primary-outline glyphicon label-modal" data-toggle="modal" data-target="#tree_text_modal">&#xe085;</button><br>
                                <label for="tree_text">
                                    <textarea class="form-control" id="tree_text" name="tree_text" rows="5" cols="90"></textarea>
                                </label>
                            </div>

                            <button type="button" class="btn btn-warning" id="advanced_button" onclick="openAdvanced()" style="display: none"><span class="glyphicon glyphicon-cog"></span>&nbsp;Advanced options</button>
                            <!--<br>-->
                            <!--<br>-->
                                <div class="form-group db" id="enzyme_div" hidden>
                                <b>Digestion enzyme: </b>
                                    <select id="enzyme" name="enzyme" class="selectpicker form-control" data-width="auto" >
                                    <option value="ArgC">ArgC</option>
                                    <option value="AspC">AspC</option>
                                    <option value="AspN">AspN</option>
                                    <option value="Chymotrypsin">Chymotrypsin</option>
                                    <option value="Chymotrypsin+">Chymotrypsin+</option>
                                    <option value="D.P">D.P</option>
                                    <option value="GluC">GluC</option>
                                    <option value="GluN">GluN</option>
                                    <option value="LysC">LysC</option>
                                    <option value="LysC/P">LysC/P</option>
                                    <option value="LysN">LysCN</option>
                                    <option value="Trypsin" selected>Trypsin</option>
                                    <option value="Trypsin/P">Trypsin/P</option>
                                </select>
                                <button type="button" class="btn btn-lg glyphicon label-modal" data-toggle="modal" data-target="#enzyme_modal">&#xe085;</button><br>

                            </div>
                            <div class="form-group db" id="enrichment_threshold_div" hidden>
                                <label for="enrichment_threshold">Min enrichment ratio:</label>
                                <input type="number" class="form-control-2" min="0.00001" step="any" id="enrichment_threshold" name="enrichment_threshold" value="5">
                                <button type="button" class="btn btn-lg glyphicon label-modal" data-toggle="modal" data-target="#enrichment_modal">&#xe085;</button><br>
                            </div>
                            <div class="form-group row">
                                <div class="col-md-5">
                                    <label for="email">Email:</label>
                                    <input type="email" class="form-control" id="email" name="email" placeholder="We'll send you a link to the results" required> <!--value="orenavr2@mail.tau.ac.il">-->
                                    <input class="form-control" name="confirm_email" type="hidden">
                                </div>
                                <div class="col-md-5">
                                    <label for="job_title">A descriptive job title:</label>
                                    <input type="text" class="form-control" id="job_title" name="job_title" placeholder="(optional)">
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="db_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&SINCOPA;</button>
                                            <h3 class="modal-title">Data base files</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            Uploaded databases should be in <a href="" target="_blank">ASAP</a> format
                                            (only files of the same format of "proteomics_db.txt" are allowed as we assume a
                                            specific header structure to parse their information).
                                            All databases (even if there is only one) should be archived into
                                            a single ".zip" file and uploaded together.
                                            Please use neither spaces nor commas in the different file names as
                                            it might cause to an unexpected behavior.<br>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="data_type_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title">Input format</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            You can either directly load the input files or copy-paste the data into the appropriate text box.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="msa_file_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title">DNA multiple sequence alignment input</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            The provided file should be in a
                                            <a href="https://www.ncbi.nlm.nih.gov/blast/fasta.shtml" target="_blank">FASTA format</a>.
                                            The sequences should be aligned (if they are unaligned, you
                                            may use different alignment programs such as
                                            <a href="https://www.ebi.ac.uk/goldman-srv/webprank/" target="_blank">PRANK</a>
                                            or
                                            <a href="https://mafft.cbrc.jp/alignment/server/" target="_blank">MAFFT</a>).
                                            Ambiguous characters (such as 'N') will be replaced by the major character
                                            in the corresponding column. We will provide the "adjusted MSA" file as one
                                            of the outputs.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="tree_file_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title">Phylogenetic species tree</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            The input tree should be in newick format. It has to contain all the
                                            species in the provided MSA but it may contain other species as well
                                            (don't worry! we will get rid of them for you and give you the
                                            "adjusted" tree in the output folder). It may also
                                            contain bootstrap values (don't bother to remove them). Noteworthy,
                                            <b>the tree should be reconstructed based on different data than the
                                            MSA provided</b>, for example, using
                                            <a href="https://microbializer.tau.ac.il/" target="_blank">M1CR0B1AL1Z3R</a>
                                            or any other phylogeny reconstruction such as
                                            <a href="http://www.atgc-montpellier.fr/phyml/" target="_blank">PhyML</a>
                                            or
                                            <a href="https://raxml-ng.vital-it.ch/#/" target="_blank">RaXML</a>.<br>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="msa_text_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title">DNA multiple sequence alignment input</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            The input sequences should be aligned (if they are unaligned, you
                                            may use different alignment programs such as
                                            <a href="https://www.ebi.ac.uk/goldman-srv/webprank/" target="_blank">PRANK</a>
                                            or
                                            <a href="https://mafft.cbrc.jp/alignment/server/" target="_blank">MAFFT</a>).
                                            Ambiguous characters (such as 'N') will be replaced by the major character
                                            in the corresponding column. We will provide the "adjusted MSA" as one
                                            of the outputs.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="tree_text_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title">Phylogenetic species tree</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            The input tree should be in newick format. It has to contain all the
                                            species in the provided MSA but it may contain other species as well
                                            (don't worry! we will get rid of them for you and give you the
                                            "adjusted" tree in the output folder). It may also
                                            contain bootstrap values (don't bother to remove them). Noteworthy,
                                            <b>the tree should be reconstructed based on different data then the
                                            MSA provided</b>, for example, using
                                            <a href="https://microbializer.tau.ac.il/" target="_blank">M1CR0B1AL1Z3R</a>
                                            or any other phylogeny reconstruction such as
                                            <a href="http://www.atgc-montpellier.fr/phyml/" target="_blank">PhyML</a>
                                            or
                                            <a href="https://raxml-ng.vital-it.ch/#/" target="_blank">RaXML</a>.<br>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="enzyme_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title">Digestion enzyme</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            Digestion enzyme for MaxQuant Analysis.<br>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="enrichment_modal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h3 class="modal-title">Mininmal enrichment level</h3>
                                        </div>
                                        <div class="modal-body" align="justify">
                                            The minimal enrichment fold level required for passing the initial filtration.
                                            If a peptide's intensity in the flow-through is <i>n</i>, its elution intensity should be at least <i>n</i> times <i>Min enrichment ratio</i> in order to be kept for downstream analysis.<br>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <input name="example_page" value="no" id="example_page" hidden>
                            <input type="checkbox" id="open_advanced_flag" value="off" hidden>
                            <button type="submit" class="btn btn-success btn-lg" id="success"><span class="glyphicon glyphicon-cloud-upload"></span>&nbsp;Submit</button>
                            <br><br>
                            <button type="button" class="btn btn-danger btn-lg" onclick="resetForm()"><span class="glyphicon glyphicon-trash"></span>&nbsp;Reset form</button>
                            <button type="button" class="btn btn-info btn-lg" onclick="loadExample()">Load example data</button>
                            <!--<a href="index.html"><button type="button" class="btn btn-info">Clear Example</button></a>-->
                            <br><br><br><br>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <nav role="navigation" class="navbar-inverse navbar-fixed-bottom ng-binding" style="color: #cccccc; text-align: center; font-family: Calibri;">
            <h4>
                    Research Site | <a href="https://www.tau.ac.il/~talp/" target="_blank">Pupko Group</a>
            </h4>
        </nav>
    </body>
</html>